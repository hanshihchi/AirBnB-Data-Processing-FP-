<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ui.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ui.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import readline from 'readline';
import { loadData } from './AirBnBDataHandler.js';

/**
 * Promisified readline question.
 * @param {readline.Interface} rl - Readline interface.
 * @param {string} question - The question to ask.
 * @returns {Promise&lt;string>} User's answer.
 */
const askQuestion = (rl, question) =>
  new Promise((resolve) => rl.question(question, resolve));

/**
 * Starts the console UI.
 * @param {string} csvFilePath - Path to the CSV file.
 */
export const startUI = async (csvFilePath) => {
  let handler = await loadData(csvFilePath);
  console.log('Data loaded. Total listings:', handler.data.length);

  const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout,
  });

  // Object to store the computed results.
  const calculations = {};

  let exit = false;
  while (!exit) {
    console.log(`
      1. Filter Listings
      2. Compute Statistics
      3. Compute Listings Per Host
      4. Filter by Host Location
      5. Export Results
      6. Exit
    `);
    const choice = await askQuestion(rl, 'Select an option: ');
    switch (choice.trim()) {
      case '1': {
        const price = await askQuestion(rl, 'Enter max price (or leave blank): ');
        const roomType = await askQuestion(
          rl,
          'Enter room type (Entire home/apt, Private room, or leave blank): '
        );
        const bedrooms = await askQuestion(rl, 'Enter number of bedrooms (or leave blank): ');
        const rating = await askQuestion(
          rl,
          'Enter minimum review scores rating (or leave blank): '
        );
        const filterParams = {
          price: price ? parseFloat(price) : undefined,
          room_type: roomType || undefined,
          bedrooms: bedrooms ? parseInt(bedrooms) : undefined,
          review_scores_rating: rating ? parseFloat(rating) : undefined,
        };
        // Update the working handler with the filtered data.
        handler = handler.filter(filterParams);
        console.log('Filtered listings count:', handler.data.length);
        break;
      }
      case '2': {
        const stats = handler.computeStats();
        calculations.stats = stats;
        console.log('Computed Statistics:');
        console.log('Total listings:', stats.count);
        console.log('Average price per number of bedrooms:', stats.avgPricePerBedroom);
        break;
      }
      case '3': {
        const rankings = handler.computeListingsPerHost();
        calculations.rankings = rankings;
        console.log('Computed Listings Per Host (ranked):', rankings);
        break;
      }
      case '4': {
        const location = await askQuestion(rl, 'Enter host location to filter: ');
        const locationFilteredHandler = handler.filterByHostLocation(location);
        calculations.locationCount = [location, locationFilteredHandler.data.length];
        console.log('Listings count for host location:', locationFilteredHandler.data.length);
        break;
      }
      case '5': {
        const filePath = await askQuestion(rl, 'Enter export file path: ');
        await handler.exportResults(filePath, calculations);
        console.log('Results exported to', filePath);
        break;
      }
      case '6': {
        exit = true;
        break;
      }
      default:
        console.log('Invalid option, try again.');
    }
  }
  rl.close();
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#AirBnBDataHandler">AirBnBDataHandler</a></li><li><a href="global.html#askQuestion">askQuestion</a></li><li><a href="global.html#computeListingsPerHost">computeListingsPerHost</a></li><li><a href="global.html#computeStats">computeStats</a></li><li><a href="global.html#exportResults">exportResults</a></li><li><a href="global.html#extractPrice">extractPrice</a></li><li><a href="global.html#filter">filter</a></li><li><a href="global.html#filterByHostLocation">filterByHostLocation</a></li><li><a href="global.html#loadData">loadData</a></li><li><a href="global.html#startUI">startUI</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Feb 26 2025 15:41:16 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
